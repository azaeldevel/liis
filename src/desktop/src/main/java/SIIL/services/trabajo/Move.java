
package SIIL.services.trabajo;

import SIIL.services.Trabajo;
import SIIL.services.Trabajo.Sheet;
import core.*;
import java.util.Date;

/**
 *
 * @author Azael Reyes
 */
public class Move extends javax.swing.JPanel implements DialogContent
{
    private Dialog dialog;
    private Trabajo trabajo;
    private boolean flagDB;
    private Sheet sheet;
    private Date date;
    
    
    public Move() 
    {
        initComponents();
        grSheet.add(opCam);
        grSheet.add(opGru);
        grSheet.add(opTall);
    }
    
    public boolean isReady()
    {
        return flagDB;
    }
    /**
     * Creates new form Calendario
     * @param trabajo
     */
    public Move(Trabajo trabajo) 
    {
        initComponents();
        this.trabajo = trabajo;
        flagDB = false;
        grSheet.add(opCam);
        grSheet.add(opGru);
        grSheet.add(opTall);
        grSheet.add(opManto);
        updateControls(trabajo);
    }

    private void updateControls(Trabajo trabajo1) 
    {
        if (trabajo1.getSheet() == Sheet.CAMPO) {
            opCam.setSelected(true);
        } else if (trabajo1.getSheet() == Sheet.TALLER) {
            opTall.setSelected(true);
        } else if (trabajo1.getSheet() == Sheet.GRUA) {
            opGru.setSelected(true);
        }
        fecha.setDate(trabajo1.getFhToDo());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        grSheet = new javax.swing.ButtonGroup();
        lbMsg = new javax.swing.JLabel();
        btAcept = new javax.swing.JButton();
        fecha = new org.jdesktop.swingx.JXDatePicker();
        btCancel = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        opCam = new javax.swing.JRadioButton();
        opTall = new javax.swing.JRadioButton();
        opGru = new javax.swing.JRadioButton();
        opManto = new javax.swing.JRadioButton();

        lbMsg.setText("Indique la fecha");

        btAcept.setText("Aceptar");
        btAcept.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btAceptActionPerformed(evt);
            }
        });

        btCancel.setText("Cancelar");
        btCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btCancelActionPerformed(evt);
            }
        });

        jLabel1.setText("Hoja");

        opCam.setText("Campo");

        opTall.setText("Taller");

        opGru.setText("Grua");

        opManto.setText("Manto.");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lbMsg, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btCancel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btAcept))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(fecha, javax.swing.GroupLayout.PREFERRED_SIZE, 164, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(opCam)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(opTall)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(opGru)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(opManto)))
                        .addGap(0, 102, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lbMsg, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(fecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(opCam)
                    .addComponent(opTall)
                    .addComponent(opGru)
                    .addComponent(opManto))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 28, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btAcept)
                    .addComponent(btCancel))
                .addGap(29, 29, 29))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btAceptActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btAceptActionPerformed
        //try 
        {
            //Trace contexTrace = new Trace(BACKWARD_BD, SIIL.servApp.cred.getUser(), "Moviendo Registro");            
            if(fecha.getDate() != null)
            {
                //trabajo.upfhToDo(db, fecha.getDate(), contexTrace);
                date = fecha.getDate();
            }
            
            if(opCam.isSelected())
            {
                //trabajo.upSheet(db, Sheet.CAMPO, contexTrace);
                sheet = Sheet.CAMPO;
            }
            else if(opTall.isSelected())
            {
                //trabajo.upSheet(db, Sheet.TALLER, contexTrace);
                sheet = Sheet.TALLER;
            }
            else if(opGru.isSelected())
            {
                //trabajo.upSheet(db, Sheet.GRUA, contexTrace);
                sheet = Sheet.GRUA;
            }              
            else if(opManto.isSelected())
            {
                //trabajo.upSheet(db, Sheet.GRUA, contexTrace);
                sheet = Sheet.GRUA;
            } 
            //flagDB = true;
        } 
        /*catch (SQLException ex) 
        {
            //Logger.getLogger(Calendario.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this,
                ex.getMessage(),
                "Error Interno",
                JOptionPane.ERROR_MESSAGE
            );
        }*/
        
        if(dialog != null)
        {
           dialog.dispose();
        }
    }//GEN-LAST:event_btAceptActionPerformed

    private void btCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btCancelActionPerformed
        if(dialog != null)dialog.dispose();
    }//GEN-LAST:event_btCancelActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btAcept;
    private javax.swing.JButton btCancel;
    private org.jdesktop.swingx.JXDatePicker fecha;
    private javax.swing.ButtonGroup grSheet;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel lbMsg;
    private javax.swing.JRadioButton opCam;
    private javax.swing.JRadioButton opGru;
    private javax.swing.JRadioButton opManto;
    private javax.swing.JRadioButton opTall;
    // End of variables declaration//GEN-END:variables

    /**
     * @param dialog the dialog to set
     */
    @Override
    public void setDialog(Dialog dialog) 
    {
        this.dialog = dialog;
    }

    /**
     * @return the sheet
     */
    public Sheet getSheet() {
        return sheet;
    }

    /**
     * @return the date
     */
    public Date getDate() {
        return date;
    }
}
